<div class="dashboard-container">
  <div class="header">
    <h1>Enquiries Dashboard</h1>
    <button class="logout-btn" (click)="logout()">Logout</button>
  </div>

<!-- Update the controls section to include items per page selector -->
<div class="controls">
  <div class="search-container">
    <input 
      type="text" 
      class="search-input" 
      placeholder="Search enquiries..." 
      [(ngModel)]="searchTerm" 
      (input)="onSearch()"
    >
  </div>
  
  <!-- Add items per page selector -->
  <div class="items-per-page">
    <label for="itemsPerPage">Items per page:</label>
    <select 
      id="itemsPerPage" 
      [(ngModel)]="itemsPerPage" 
      (change)="onItemsPerPageChange()"
      class="items-select"
    >
      <option value="5">5</option>
      <option value="10">10</option>
      <option value="25">25</option>
      <option value="50">50</option>
      <option value="100">100</option>
    </select>
  </div>
  
  <button class="export-btn" (click)="exportToExcel()">
    Export to Excel
  </button>
</div>

<!-- Update the table to use paginatedEnquiries instead of filteredEnquiries -->
<div class="table-container" *ngIf="!isLoading">
  <table class="enquiries-table">
<thead>
  <tr>
    <!-- <th>ID</th> -->
    <th>Name</th>
    <th>Email</th>
    <th>Mobile</th>
    <th>Graduation Year</th>
    <th>Experience</th>
    <th>Preferred Course</th>
    <th>State</th>
    <th>City</th>
    <!-- <th>Agreed to Terms</th> -->
    <th>Submitted</th>
    <th>Actions</th>
  </tr>
</thead>
<tbody>
  <tr *ngFor="let enquiry of paginatedEnquiries">
    <!-- <td>{{ enquiry.id }}</td> -->
    <td>{{ enquiry.fullName }}</td>
    <td>{{ enquiry.email }}</td>
    <td>{{ enquiry.mobileNumber }}</td>
    <td>{{ enquiry.graduationYear }}</td>
    <td>
      <span *ngIf="enquiry.experience === 'fresher'">Fresher</span>
      <span *ngIf="enquiry.experience === '1'">1 Year</span>
      <span *ngIf="enquiry.experience === '2'">2 Years</span>
      <span *ngIf="enquiry.experience === '3'">3 Years</span>
      <span *ngIf="enquiry.experience === '4'">4 Years</span>
      <span *ngIf="enquiry.experience === '5'">5 Years</span>
      <span *ngIf="enquiry.experience === '6+'">6+ Years</span>
    </td>
    <td>
      <span *ngIf="enquiry.preferredCourse === 'full-stack-development'">Full Stack Development</span>
      <span *ngIf="enquiry.preferredCourse === 'data-science-and-analytics'">Data Science and Analytics</span>
      <span *ngIf="enquiry.preferredCourse === 'cloud'">Cloud</span>
      <span *ngIf="enquiry.preferredCourse === 'cyber-security'">Cyber Security</span>
      <span *ngIf="enquiry.preferredCourse === 'sap-coming-soon'">SAP - Coming Soon</span>
      <span *ngIf="!enquiry.preferredCourse">N/A</span>
    </td>
    <td>{{ enquiry.stateName }}</td>
    <td>{{ enquiry.cityName }}</td>
    <!-- <td>{{ enquiry.agreeToTerms ? 'Yes' : 'No' }}</td> -->
    <td>{{ enquiry.created_at | date:'medium' }}</td>
    <td>
      <button class="delete-btn" (click)="deleteEnquiry(enquiry.id)">
        Delete
      </button>
    </td>
  </tr>
</tbody>
  </table>

  <!-- Add pagination controls -->
  <div class="pagination-container" *ngIf="totalPages > 1">
    <div class="pagination-info">
      Showing {{ (currentPage - 1) * itemsPerPage + 1 }} to 
      {{ Math.min(currentPage * itemsPerPage, totalItems) }} of 
      {{ totalItems }} entries
    </div>
    
    <div class="pagination-controls">
      <button 
        class="pagination-btn" 
        (click)="goToFirstPage()" 
        [disabled]="currentPage === 1"
      >
        First
      </button>
      
      <button 
        class="pagination-btn" 
        (click)="goToPreviousPage()" 
        [disabled]="currentPage === 1"
      >
        Previous
      </button>
      
      <button 
        *ngFor="let page of getPageNumbers()" 
        class="pagination-btn page-number" 
        [class.active]="page === currentPage"
        (click)="goToPage(page)"
      >
        {{ page }}
      </button>
      
      <button 
        class="pagination-btn" 
        (click)="goToNextPage()" 
        [disabled]="currentPage === totalPages"
      >
        Next
      </button>
      
      <button 
        class="pagination-btn" 
        (click)="goToLastPage()" 
        [disabled]="currentPage === totalPages"
      >
        Last
      </button>
    </div>
  </div>

  <div class="no-data" *ngIf="paginatedEnquiries.length === 0 && !isLoading">
    No enquiries found
  </div>
</div>
</div>